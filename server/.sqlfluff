[sqlfluff]
# Set the SQL dialect to ClickHouse
dialect = clickhouse

# Exclude problematic rules for ClickHouse/Tinybird
# L003: Indentation not consistent with previous line
# L016: Line too long
# L031: Avoid table aliases in from clauses and join conditions
# L034: Select wildcards then simple targets before calculations and aggregates
# L036: Select targets should be on a new line unless there is only one select target
# L044: Query produces an unknown number of result columns
# L046: Jinja tags should have a single whitespace on either side
# L051: Join clauses should not contain subqueries. Use common table expressions (CTEs) instead
# L052: Statements should end with a semi-colon
# CP03: Inconsistent capitalisation of function names (ClickHouse uses camelCase for some functions)
# LT12: Files must end with a single trailing newline (Tinybird format may not include this)
exclude_rules = L003,L016,L031,L034,L036,L044,L046,L051,L052,CP03,LT12

# Configure file discovery
# Note: Tinybird .pipe and .datasource files need special handling
sql_file_exts = .sql,.pipe,.datasource

# Templater is set to raw since Tinybird files don't use templating
templater = raw

# Maximum line length
max_line_length = 120

# Indentation configuration
[sqlfluff:indentation]
indent_unit = space
tab_space_size = 4

# Layout configuration for better readability
[sqlfluff:layout:type:comma]
spacing_before = touch
line_position = trailing
