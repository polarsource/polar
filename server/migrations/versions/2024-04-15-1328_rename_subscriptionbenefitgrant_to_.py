"""Rename SubscriptionBenefitGrant to BenefitGrant

Revision ID: b1e6ff5b24b1
Revises: cf1e8a6ee407
Create Date: 2024-04-15 13:28:29.299730

"""

import sqlalchemy as sa
from alembic import op
from sqlalchemy.dialects import postgresql

# Polar Custom Imports
from polar.kit.extensions.sqlalchemy import PostgresUUID

# revision identifiers, used by Alembic.
revision = "b1e6ff5b24b1"
down_revision = "cf1e8a6ee407"
branch_labels: tuple[str] | None = None
depends_on: tuple[str] | None = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.rename_table("subscription_benefit_grants", "benefit_grants")

    op.execute("""
        ALTER INDEX ix_subscription_benefit_grants_benefit_id
        RENAME TO ix_benefit_grants_benefit_id;
    """)
    op.execute("""
        ALTER INDEX ix_subscription_benefit_grants_subscription_id
        RENAME TO ix_benefit_grants_subscription_id;
    """)
    op.execute("""
        ALTER INDEX ix_subscription_benefit_grants_user_id
        RENAME TO ix_benefit_grants_user_id;
    """)

    op.execute("""
        ALTER TABLE benefit_grants
        RENAME CONSTRAINT "subscription_benefit_grants_sbu_key"
        TO "benefit_grants_sbu_key";
    """)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.rename_table("benefit_grants", "subscription_benefit_grants")

    op.execute("""
        ALTER INDEX ix_benefit_grants_benefit_id
        RENAME TO ix_subscription_benefit_grants_benefit_id;
    """)
    op.execute("""
        ALTER INDEX ix_benefit_grants_subscription_id
        RENAME TO ix_subscription_benefit_grants_subscription_id;
    """)
    op.execute("""
        ALTER INDEX ix_benefit_grants_user_id
        RENAME TO ix_subscription_benefit_grants_user_id;
    """)

    op.execute("""
        ALTER TABLE subscription_benefit_grants
        RENAME CONSTRAINT "benefit_grants_sbu_key"
        TO "subscription_benefit_grants_sbu_key";
    """)
    # ### end Alembic commands ###
