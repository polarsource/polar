"""files add service type

Revision ID: 603db17bbfb5
Revises: 99bf7b2ba031
Create Date: 2024-05-22 09:07:25.684009

"""

import sqlalchemy as sa
from alembic import op

# Polar Custom Imports
from polar.kit.extensions.sqlalchemy import PostgresUUID

# revision identifiers, used by Alembic.
revision = "603db17bbfb5"
down_revision = "99bf7b2ba031"
branch_labels: tuple[str] | None = None
depends_on: tuple[str] | None = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column("files", sa.Column("service", sa.String(), nullable=True))
    op.execute("UPDATE files SET service = 'downloadable'")
    op.alter_column("files", "service", nullable=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column("files", "service")
    # ### end Alembic commands ###
